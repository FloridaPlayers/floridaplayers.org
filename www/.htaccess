RewriteEngine On
DirectoryIndex router.php

RewriteCond %{QUERY_STRING} ^$
RewriteRule ^(res/.+|do/.+)$ $1 [QSA,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^((?:[/a-zA-Z0-9-_\.])+)(?:.*?)? router.php?path=$0 [L,QSA]

